version: "3"
services:
  db:
    container_name: handson-db-service
    build: 
      context: .
      dockerfile: ./platform/db/Dockerfile
  item:
    container_name: handson-item-service
    environment: 
      DB_HOST: handson-db-service
      DB_PORT: 5000
      LISTEN_PORT: 5001
    build:
      context: .
      dockerfile: ./services/item/Dockerfile
    ports:
      - "5001:5001"
  customer:
    container_name: handson-customer-service
    environment: 
      DB_HOST: handson-db-service
      DB_PORT: 5000
      LISTEN_PORT: 5002
    build:
      context: .
      dockerfile: ./services/customer/Dockerfile
    ports:
      - "5002:5002"
